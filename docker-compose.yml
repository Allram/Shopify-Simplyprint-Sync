services:
  app:
    build: .
    ports:
      - "4000:4000"
    environment:
      NODE_ENV: production
      PORT: 4000
      DATABASE_URL: file:/app/data/app.db
      SHOPIFY_SHOP_DOMAIN: ${SHOPIFY_SHOP_DOMAIN}
      SHOPIFY_APP_API_KEY: ${SHOPIFY_APP_API_KEY}
      SHOPIFY_APP_API_SECRET: ${SHOPIFY_APP_API_SECRET}
      SHOPIFY_APP_URL: ${SHOPIFY_APP_URL}
      SHOPIFY_APP_SCOPES: ${SHOPIFY_APP_SCOPES}
      SHOPIFY_APP_ACCESS_TOKEN: ${SHOPIFY_APP_ACCESS_TOKEN}
      SHOPIFY_ADMIN_API_TOKEN: ${SHOPIFY_ADMIN_API_TOKEN}
      SHOPIFY_API_VERSION: 2026-01
      SHOPIFY_WEBHOOK_SECRET: ${SHOPIFY_WEBHOOK_SECRET}
      SIMPLYPRINT_COMPANY_ID: ${SIMPLYPRINT_COMPANY_ID}
      SIMPLYPRINT_API_KEY: ${SIMPLYPRINT_API_KEY}
      SIMPLYPRINT_QUEUE_GROUP_NAME: Shopify
      SIMPLYPRINT_RATE_LIMIT_PER_SECOND: ${SIMPLYPRINT_RATE_LIMIT_PER_SECOND}
      SIMPLYPRINT_FILE_CACHE_TTL_SECONDS: ${SIMPLYPRINT_FILE_CACHE_TTL_SECONDS}
      LOCAL_FILES_DIR: /RemoteFiles
      LOCAL_FILES_CACHE_TTL_SECONDS: ${LOCAL_FILES_CACHE_TTL_SECONDS}
      REDIS_URL: ${REDIS_URL}
      REDIS_HOST: ${REDIS_HOST}
      REDIS_PORT: ${REDIS_PORT}
      REDIS_PASSWORD: ${REDIS_PASSWORD}
      REDIS_DB: ${REDIS_DB}
    volumes:
      - ./data:/app/data
      - ./RemoteFiles:/RemoteFiles
